{{ define "base" }}

<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/grids-min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/grids-responsive-min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/styles.css?v=11">

    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/favicon/site.webmanifest">

    <!-- HTML Meta Tags -->
    <title>{{ .Title }} | relayscan.io</title>
    <meta name="description" content="Monitoring, analytics & data for Ethereum MEV-Boost builders and relays">

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://www.relayscan.io">
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ .Title }} | relayscan.io">
    <meta property="og:description" content="Monitoring, analytics & data for Ethereum MEV-Boost builders and relays">
    <meta property="og:image" content="https://relayscan.io/static/images/logo1-square.png">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@relayscan_io">
    <meta property="twitter:domain" content="relayscan.io">
    <meta property="twitter:url" content="https://www.relayscan.io">
    <meta name="twitter:title" content="{{ .Title }} | relayscan.io">
    <meta name="twitter:description" content="Monitoring, analytics & data for Ethereum MEV-Boost builders and relays">
    <meta name="twitter:image" content="https://relayscan.io/static/images/logo1-square.png">
</head>

<body>
    <div class="header">
        <div class="home-menu pure-menu pure-menu-horizontal">
            <a class="pure-menu-heading" href="/"><img src="/static/favicon/apple-touch-icon.png" height="16" /> relayscan.io</a>

            <ul class="pure-menu-list">
                <li class="pure-menu-item mev-ticker">
                    <span class="ticker-label">MEV Refund:</span>
                    <span class="ticker-value" id="mev-refund">0.00 ETH</span>
                </li>
                <li class="pure-menu-item mev-ticker">
                    <span class="ticker-label">Gas Refund:</span>
                    <span class="ticker-value" id="gas-refund">0.00 ETH</span>
                </li>
                <li class="pure-menu-item"><a href="https://bidarchive.relayscan.io/" class="pure-menu-link">Bid Archive</a></li>
                <li class="pure-menu-item"><a href="https://github.com/flashbots/relayscan" class="pure-menu-link">About</a></li>
                <li class="pure-menu-item"><a href="https://twitter.com/relayscan_io" class="pure-menu-link"><i class="bi bi-twitter"></i></a></li>
            </ul>
        </div>
    </div>

    {{ template "content" . }}

    <script>
        // Fetch MEV metrics from the API
        fetch('https://refund-metrics-dune-api.vercel.app/api/metrics')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                document.getElementById('mev-refund').textContent = `${data.totalMevRefund.toFixed(2)} ETH`;
                document.getElementById('gas-refund').textContent = `${data.totalGasRefund.toFixed(2)} ETH`;
            })
            .catch(error => {
                console.error('Failed to fetch MEV metrics:', error);
                // Fallback to mock data on error
                document.getElementById('mev-refund').textContent = '380.29 ETH';
                document.getElementById('gas-refund').textContent = '444.24 ETH';
            });
    </script>
</body>

</html>
{{ end }}